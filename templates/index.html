{% extends 'base.html' %} {% load static %} {% block style %}
<link href="{% static 'css/highcharts.css' %}" rel="stylesheet">
<link href="{% static 'css/swiper.css' %}" rel="stylesheet"> {% endblock %} {% block carousel %}
<div class="col-12 white-font p-0">
    <div class="col-12 pad0 slide-bg">
        <div id="carouselExampleIndicators" class="carousel slide slider-bg " data-ride="carousel">
            <!-- <ol class="carousel-indicators mb-0">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol> -->
            <div class="carousel-inner ">
                <div class="carousel-item active bg-cover coverattached" style="background-image: url({% static 'images/santori.jpg' %}">
                    <div class="">
                        <div class="col-12 p-md-5">

                            <div class="col-sm-6 offset-sm-2 bg-transparent-cover">
                                <div class="line-left pl-5">
                                    <span class="index-h1 text-capitalize">Non-Banking Financial Community Exchange </span>
                                    <br>
                                    <br>
                                    <span class="index-h2 text-capitalize">for the people, by the people</span>
                                    <br>
                                    <h3 class="text-capitalize">Take control back from banks</h3>
                                </div>
                                <p></p>
                            </div>
                            <div class="col-sm-6 text-left offset-sm-2">
                                <button class="btn slider-btn m-2 ">VIEW MORE</button>
                                <button class="btn slider-btn-2 m-2">CONTACT US</button>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <section id="rate-display" class="section-dark p-3">
        <div class="row d-none d-md-block swiper-container">
            <div class="col-12  swiper-wrapper">

                {% for coin in coin_list %}
                <div class=" text-center recent-price swiper-slide">
                    <span class="recent-price-h1">{{coin}}/USD</span>
                    <br> 
                    <span id="{{coin}}_price1"> <i class="blink">Loading</i> </span>(
                    <span id="{{coin}}_per1"></span>%)
                </div>
                {% endfor %}
            </div>
            <!-- Add Arrows -->
        </div>
    </section>

    <section id="trade-display" class="section-light p-3">
        <div class="row d-none d-md-block ">
            <div class="col-8 offset-2 d-flex justify-content-around">

                <div class="col-3 text-center b-r">
                    <span class="recent-price-h1">BTC/USD</span>
                    <br> 
                    <span id="btc-usd"><i class="blink">Loading</i></span>
                </div>

                <div class="col-3 text-center b-r">
                    <span class="recent-price-h1">LTC/USD</span>
                    <br> 
                    <span id="ltc-usd"><i class="blink">Loading</i></span>
                </div>


                <div class="col-3 text-center b-r">
                    <span class="recent-price-h1">ETH/USD</span>
                    <br> 
                    <span id="eth-usd"><i class="blink">Loading</i></span>
                </div>


                <div class="col-3 text-center">
                    <span class="recent-price-h1">XRP/USD</span>
                    <br> 
                    <span id="xrp-usd"><i class="blink">Loading</i></span>
                </div>

            </div>

        </div>
    </section>
    <section id="rate-display" class="section-dark ">
        <div class=" col-10 offset-1 p-5">
            <div class="row d-flex justify-content-around">


                <div class="col-md-3 text-center ">
                    <span class="recent-price-h1">
                        <i class="fa fa-bar-chart fa-5x" aria-hidden="true"></i>
                    </span>
                    <br>
                    <span class="trade-price-h1">Real Time Cryptocurrency Prices</span>
                    <p class="trade-price-p">Stay on top of all current prices with real time updates
                    </p>
                </div>
                <div class="col-md-3 text-center ">
                    <span class="recent-price-h1">
                        <i class="fa fa-search fa-5x" aria-hidden="true"></i>
                    </span>
                    <br>
                    <span class="trade-price-h1">No Hidden Fees</span>
                    <p class="trade-price-p"> No cost to become a member of our community
                    </p>
                </div>

                <div class="col-md-3 text-center ">
                    <span class="recent-price-h1">
                        <i class="fa fa-exchange fa-5x" aria-hidden="true"></i>
                    </span>
                    <br>
                    <span class="trade-price-h1">Instant Trading</span>
                    <p class="trade-price-p">Sign up and begin trading that day
                    </p>
                </div>

                <div class="col-md-3 text-center ">
                    <span class="recent-price-h1">
                        <i class="fa fa-lock fa-5x" aria-hidden="true"></i>
                    </span>
                    <br>
                    <span class="trade-price-h1">Security</span>
                    <p class="trade-price-p">Feel safe while buying, selling and storing your crypto assets
                    </p>
                </div>

            </div>
        </div>

        <div class="container-fluid " style="background-image: url({% static 'images/bitcoinwallpaper.jpg' %});">
            <div class="row bg-transparent-cover d-flex align-items-center">
                <div class="col-md-6 offset-md-1 p-5">
                    <h1>Buy, sell and store your cryptocurrency with ease!</h1>
                    <p class="text-justify pt-0"> It takes less than one minute to register your account and begin trading instantly! Simply add your bank
                        details, verify your identity, and begin trading. Our transaction fees range from 1-4%, with bigger
                        trades receiving the lowest fees. Trading your Cryptocurrency has never been simpler!

                    </p>
                </div>
                <div class="d-none d-md-block col-md-4 p-5">
                    <img class="img-fluid" src="{% static 'images/allcoins.png' %}">

                </div>
            </div>
        </div>
    </section>

    <!--  -->

    <section class="section-blue p-3 text-center">
        <h1 class="pt-5">Why Choose Psalm?</h1>
        <!-- underline -->
        <div class="col-12 d-flex justify-content-center">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-end">
                <div class="col-9 push-3 line-1"></div>
            </div>
            <img class="" src="{% static 'images/theme/rectangle.png' %}">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-start">
                <div class="col-9 push-3 line-1"></div>
            </div>
        </div>
        <!-- underline -->
        <p>Psalm aims to make the trading of cryptocurrency direct and easy for everyone, everywhere
        </p>
        <div class=" col-10 offset-1 p-5">
            <div class="row d-flex justify-content-around">


                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/payment.png' %}">
                    <br>
                    <span class="about-head">Same Day Trading</span>
                    <br>
                    <p class="trade-price-p">Once you are registered with us you can begin trading immediately
                    </p>
                </div>
                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/strong.png' %}">
                    <br>
                    <span class="about-head">Security</span>
                    <br>
                    <p class="trade-price-p">Our two step verification and cold wallet make our exchange platform one of the safest on the web
                    </p>
                </div>


                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/world.png' %}">
                    <br>
                    <span class="about-head">Most popular Cryptocurrencies and fiat</span>
                    <br>
                    <p class="trade-price-p">We offer trading of the top 15 most popular cryptocurrencies with more to be introduced
                    </p>
                </div>


                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/legal.png' %}">
                    <br>
                    <span class="about-head">Psalm Debit Card</span>
                    <br>
                    <p class="trade-price-p">An innovative debit card that allows you to spend your cryptocurrency on everyday items
                    </p>
                </div>


                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/trading.png' %}">
                    <br>
                    <span class="about-head">Mobile Wallet and Exchange</span>
                    <br>
                    <p class="trade-price-p">A convenient mobile application for managing and exchanging all your altcoins
                    </p>
                </div>


                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/cross.png' %}">
                    <br>
                    <span class="about-head">Secure Cold Storage</span>
                    <br>
                    <p class="trade-price-p">Every user can decide how much of their coins should be kept in cold storage
                    </p>
                </div>


                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/aim.png' %}">
                    <br>
                    <span class="about-head">Tools of the trade</span>
                    <br>
                    <p class="trade-price-p">Full range of professional analytical tools and trading tools
                    </p>
                </div>

                <div class="col-md-3 text-center whychoose">
                    <img src="{% static 'images/theme/news.png' %}">
                    <br>
                    <span class="about-head">Real-time Updates</span>
                    <br>

                    <p class="trade-price-p">Stay ahead of the market prices by being updated in real time
                    </p>
                </div>
            </div>
        </div>
    </section>


    <!--  -->
    <section id="rate-display" class="section-dark text-center p-5 container-fluid coverattached" style="background-image: url('/static/images/debitbg1.png'); background-size:cover;">
        <h1 class="pt-5">Introducing Our Psalm Debit Card </h1>
        <!-- underline -->
        <div class="col-12 d-flex justify-content-center">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-end">
                <div class="col-9 push-3 line-1"></div>
            </div>
            <img class="" src="{% static 'images/theme/rectangle.png' %}">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-start">
                <div class="col-9 push-3 line-1"></div>
            </div>
        </div>
        <!-- underline -->
        <div class="container-fluid p-0">
            <div class="row d-flex align-items-center">

                <div class="d-md-none">
                    <img class="img-fluid" src="{% static 'images/debitcard2.png' %}">

                </div>
                <div class="col-md-6 offset-md-1 p-5 text-left">
                    <h3>Bring your crypto assets into your everyday life!</h3>
                    <p class="text-justify">Like any other debit card, you’ll be able to pay for everyday goods such as groceries, gas, a cup of
                        coffee, as well as make online purchases using our revolutionary Psalm Debit Card!

                    </p>
                </div>
                <div class="d-none d-md-block col-md-4 p-5">
                    <img class="img-fluid" src="{% static 'images/debitcard2.png' %}">

                </div>
            </div>
        </div>
    </section>


    <!--  -->

<!-- 
    <section class="section-dark text-center p-5 container-fluid">
        <h1 class="pt-5">No Pricing Plan!</h1> -->
        <!-- underline -->
        <!-- <div class="col-12 d-flex justify-content-center">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-end">
                <div class="col-9 push-3 line-1"></div>
            </div>
            <img class="" src="{% static 'images/theme/rectangle.png' %}">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-start">
                <div class="col-9 push-3 line-1"></div>
            </div>
        </div> -->
        <!-- underline -->
        <!-- <p>Every registered member has access to all of our sites awesome features
        </p>
        <div class="row mt-5">
            <div class="col-md-3  mt-3 d-flex justify-content-center btn-border">
                <div class="btn-lightblue">Buy Bitcoin</div>
                <div class="btn-empty">Sell Bitcoin</div>
            </div>
            <div class="col-md-3  mt-3  d-flex justify-content-center btn-border">
                <div class="btn-lightblue">Buy Bitcoin</div>
                <div class="btn-empty">Sell Bitcoin</div>
            </div>
            <div class="col-md-6  mt-3  d-flex justify-content-center btn-border">
                <div class="btn-lightblue">USD</div>
                <div class="btn-empty2">EUR</div>
                <div class="btn-empty2">GBP</div>
                <div class="btn-empty">RUB</div>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-md-3 mt-3 text-center pricing-border pb-l">
                <span class="pricing-h1">GET 0.0686 BTC</span>
                <br>
                <span>For</span>
                <div class="pricing-line-1 text-center">
                    <div class="pricing-line-2"></div>
                </div>
                <span class="pricing-h1">$100</span>
                {% if user.is_authenticated %}
                <a href="#">
                    <div class="pricing-btn-empty">Buy Now</div>
                </a>
                {% else %}
                <a href="#">
                    <div class="pricing-btn-empty">Register</div>
                </a>
                {% endif %}
            </div>

            <div class="col-md-3 mt-3 text-center pricing-border">
                <span class="pricing-h1">GET 0.0686 BTC</span>
                <br>
                <span>For</span>
                <div class="pricing-line-1 text-center">
                    <div class="pricing-line-2"></div>
                </div>
                <span class="pricing-h1">$100</span>

                {% if user.is_authenticated %}
                <a href="#">
                    <div class="pricing-btn-empty">Buy Now</div>
                </a>
                {% else %}
                <a href="#">
                    <div class="pricing-btn-empty">Register</div>
                </a>
                {% endif %}
            </div>

            <div class="col-md-3 mt-3 text-center pricing-border">
                <span class="pricing-h1">GET 0.0686 BTC</span>
                <br>
                <span>For</span>
                <div class="pricing-line-1 text-center">
                    <div class="pricing-line-2"></div>
                </div>
                <span class="pricing-h1">$100</span>

                {% if user.is_authenticated %}
                <a href="#">
                    <div class="pricing-btn-empty">Buy Now</div>
                </a>
                {% else %}
                <a href="#">
                    <div class="pricing-btn-empty">Register</div>
                </a>
                {% endif %}
            </div>

            <div class="col-md-3 mt-3 text-center pricing-border pb-r">
                <span class="pricing-h1">GET 0.0686 BTC</span>
                <br>
                <span>For</span>
                <div class="pricing-line-1 text-center">
                    <div class="pricing-line-2"></div>
                </div>
                <span class="pricing-h1">$100</span>

                {% if user.is_authenticated %}
                <a href="#">
                    <div class="pricing-btn-empty">Buy Now</div>
                </a>
                {% else %}
                <a href="#">
                    <div class="pricing-btn-empty">Register</div>
                </a>
                {% endif %}
            </div>
        </div>
    </section> -->

    {% comment %}
    <section class="section-blue p-3 text-center">
        <h1 class="pt-5">Feedback Our investors </h1>
        <!-- underline -->
        <div class="col-12 d-flex justify-content-center">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-end">
                <div class="col-9 push-3 line-1"></div>
            </div>
            <img class="" src="{% static 'images/theme/rectangle.png' %}">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-start">
                <div class="col-9 push-3 line-1"></div>
            </div>
        </div>
        <!-- underline -->
        <p>Exchange transactions of your referred users Bitcoin Psd template designe
        </p>
        <div class=" col-10 offset-1 p-0 p-sm-5">
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner text-center">
                    <div class="carousel-item active ">
                        <img src="{% static 'images/theme/anon.png' %}" class="img-fluid" alt="First slide">
                        <div class="col-10 offset-1">
                            <p>
                                <i class="fa fa-quote-left feedback-quote float-left" aria-hidden="true"></i>
                                <br>
                                <br> Enjoy the diversity of ThePin. Check this numerous demos, made for different purposes. Easy
                                to import & higly customizable. All of the presented elements, layouts & styles can be theme.
                                <br>
                                <br>
                                <i class="fa fa-quote-right feedback-quote float-right" aria-hidden="true"></i>
                            </p>
                            <br>
                            <h1>John Doe</h1>
                            <h4>United States</h4>
                        </div>

                    </div>
                    <!-- <div class="carousel-item">
                    <img src="{% static 'images/theme/anon.png' %}" class="image-fluid" alt="First slide">
                </div>
                <div class="carousel-item">
                    <img src="{% static 'images/theme/anon.png' %}" class="image-fluid" alt="First slide">
                </div> -->
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </section> {% endcomment %}

    <section class="section-dark text-center  px-5 pb-0  container-fluid">
        <h1 class="pt-5 mt-0">Our Market Depths</h1>
        <!-- underline -->
        <div class="col-12 d-flex justify-content-center">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-end">
                <div class="col-9 push-3 line-1"></div>
            </div>
            <img class="" src="{% static 'images/theme/rectangle.png' %}">
            <div class="col-3 col-md-2 d-flex align-items-center justify-content-start">
                <div class="col-9 push-3 line-1"></div>
            </div>
        </div>
        <!-- underline -->

        <div class="container-fluid ">
            <div class="row  d-flex justify-content-center flex-row ">
                {% for coin in coin_list %}
                <div class=" text-center mt-3 empty-border" style="width:75px; display:inline-block;" id="{{coin}}_graph" onclick="getgraph('{{coin}}')">
                    <span class="pricing-h1" id="{{coin}}_usd">{{coin}}</span>
                </div>
                {% endfor %}
            </div>

            <div class="row d-flex justify-content-start mt-3">

                <div class="col-6 col-sm-4 col-md-2 text-center mt-3 ">
                    <span class="pricing-h1" id="coin_name">BTC</span>
                    <br>
                    <span id="coin_value">
                        <i class="blink">Loading</i>
                    </span>
                    <span id="coin_percentage"></span>
                </div>


                <div class="col-6 col-sm-4 col-md-2 text-center mt-3 ">
                    <span class="pricing-h1">Market Cap</span>
                    <br>
                    <span id="coin_change_1"></span>
                </div>

                <div class="col-6 col-sm-4 col-md-2 text-center mt-3 ">
                    <span class="pricing-h1">24Hr VWAP</span>
                    <br>
                    <span id="coin_change_2"></span>
                </div>

                <div class="col-6 col-sm-4 col-md-2 text-center mt-3 ">
                    <span class="pricing-h1">Available Supply</span>
                    <br>
                    <span id="coin_change_3"></span>
                </div>

                <div class="col-6 col-sm-4 col-md-2 text-center mt-3 ">
                    <span class="pricing-h1">24h Volume</span>
                    <br>
                    <span>
                        <span id="coin_change_4"></span>
                </div>
            </div>
        </div>
        <br>

    </section>
    <section class="p-0 pl-md-5 pr-md-5 pb-md-5 pt-md-0 marketbox">

        <div id="graph_container" class="white-font"></div>
    </section>
    <section class="section-blue p-3 text-center">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-md-2 d-flex flex-row justify-content-center align-items-center p-2 mt-3">
                    <img class="w40" src="{% static 'images/theme/btc.png' %}">
                    <span>&emsp; Bitcoin</span>
                </div>
                <div class="col-sm-6 col-md-2 d-flex flex-row justify-content-center align-items-center p-2 mt-3">
                    <img class="w40" src="{% static 'images/theme/eth.png' %}">
                    <span>&emsp; Ethereum</span>
                </div>


                <div class="col-sm-6 col-md-2 d-flex flex-row justify-content-center align-items-center p-2 mt-3">
                    <img class="w40" src="{% static 'images/theme/ltc.png' %}">
                    <span>&emsp; Litecoin</span>
                </div>


                <div class="col-sm-6 col-md-2 d-flex flex-row justify-content-center align-items-center p-2 mt-3">
                    <img class="w40" src="{% static 'images/theme/bch.png' %}">
                    <span>&emsp; Bitcoin Cash</span>
                </div>


                <div class="col-sm-6 col-md-2 d-flex flex-row justify-content-center align-items-center p-2 mt-3">
                    <img class="w40" src="{% static 'images/theme/btg.png' %}">
                    <span>&emsp; Bitcoin Gold</span>
                </div>


                <div class="col-sm-6 col-md-2 d-flex flex-row justify-content-center align-items-center p-2 mt-3">
                    <img class="w40" src="{% static 'images/theme/monero.png' %}">
                    <span>&emsp; Monero</span>
                </div>

                <div class="col-12 p-0 p-sm-5 mt-5 mb-3 mt-md-0 ">
                    {% if user.is_authenticated %}

                    <a href="{% url 'coins:wallets' %}" class=" coin-btn-empty">Your Wallet</a>
                    {% else %}
                    <a href="{% url 'auth:signup' %}" class=" coin-btn-empty">Are you ready to join?</a>

                    {% endif %}
                </div>




            </div>
        </div>

    </section>
</div>
{% endblock %} {% block content %} {% endblock %} {% block script %}

<script type="text/javascript" src="{% static 'js/socket.io.js'%}"></script>
<script>
    $.ajax({
        dataType: "json",
        url: "https://coincap.io/front",
        success: function (data) {

            for (obj in data) {
                if (data[obj].short == "BTC" || "XEM" || "ETH" || "LTC" || "BTG" || "XMR" || "XRP" || "IOT" || "ADA" || "TRX" || "DASH" || "BCH" || "XLM") {
                    $('#' + data[obj].short + '_price1').text(numeral(data[obj].price).format('$0,0.00'));
                    $('#' + data[obj].short + '_per1').text(data[obj].perc);
                    if (data[obj].short == "BTC") {
                        $('#btc-usd').text(numeral(data[obj].price).format('$0,0.00'));
                        $('#coin_value').text(numeral(data[obj].price).format('$0,0.00'));
                        $('#coin_change_1').text(numeral(data[obj].mktcap).format('$0,0.00'));
                        $('#coin_change_2').text((numeral(data[obj].price).format('$0,0.00')));
                        $('#coin_change_3').text(numeral(data[obj].supply).format('$0,0.00'));
                        $('#coin_change_4').text(numeral(data[obj].usdVolume).format('$0,0.00'));
                    }
                    if (data[obj].short == "ETH") {
                        $('#eth-usd').text(numeral(data[obj].price).format('$0,0.00'));
                    }
                    if (data[obj].short == "XRP") {
                        $('#xrp-usd').text(numeral(data[obj].price).format('$0,0.00'));
                    }
                    if (data[obj].short == "LTC") {
                        $('#ltc-usd').text(numeral(data[obj].price).format('$0,0.00'));
                    }

                }
            }
        }
    });

</script>

<!-- highchart -->
<script src="{% static 'js/highstock.js' %}"></script>
<script>

    $.getJSON('https://coincap.io/history/365day/BTC', function (data) {
        // Create the chart
        var chart = Highcharts.stockChart('graph_container', {
            chart: {
                height: 400
            }, title: {
                text: 'BITCOIN - BTC'
            },
            scrollbar: {
                barBackgroundColor: 'gray',
                barBorderRadius: 7,
                barBorderWidth: 0,
                buttonBackgroundColor: 'red',
                buttonBorderWidth: 0,
                buttonArrowColor: 'yellow',
                buttonBorderRadius: 7,
                rifleColor: 'yellow',
                trackBackgroundColor: 'white',
                trackBorderWidth: 1,
                trackBorderColor: 'silver',
                trackBorderRadius: 7
            },
            rangeSelector: {
                buttonTheme: { // styles for the buttons
                    fill: 'none',
                    stroke: 'none',
                    'stroke-width': 0,
                    r: 8,
                    style: {
                        color: '#1783ac;',
                        fontWeight: '600'
                    },
                    states: {
                        hover: {
                        },
                        select: {
                            fill: '#1b334b',
                            style: {
                                color: '#1b334b;'
                            }
                        }
                    }
                },
                inputBoxBorderColor: '#1783ac',
                inputBoxWidth: 120,
                inputBoxHeight: 20,
                inputStyle: {
                    color: '#1783ac',
                    fontWeight: 'bold',
                },
                labelStyle: {
                    color: '#fff',
                    fontWeight: 'bold'
                },
                selected: 1
            },

            series: [{
                name: 'Bitcoin Price in USD',
                data: data.price,
                type: 'area',
                threshold: null,
                tooltip: {
                    valueDecimals: 2
                }
            }],

            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 300
                    },
                    chartOptions: {
                        chart: {
                            height: 300
                        },
                        subtitle: {
                            text: null
                        },
                        navigator: {
                            enabled: false
                        }
                    }
                }]
            }
        });
    });

</script>
<!-- socket -->
<script>
    var socket;
    socket = io.connect('https://socket.coincap.io');
    function getgraph(cur_coin) {

        var cur_coin_long;
        $('#coin_name').text(cur_coin);
        $('#coin_value').text("loading");
        $('#coin_percentage').text("");
        $('#coin_value').addClass("blink");

        socket.close();
        socket = io.connect('https://socket.coincap.io');
        socket.on('trades', function (tradeMsg) {
            if (tradeMsg.coin == cur_coin) {
                var tempcoin = tradeMsg.message.coin;
                var tempvalue ="$ "+ tradeMsg.message.msg.price.toFixed(2);
                var temppercent = "(" + tradeMsg.message.msg.cap24hrChange + "%)";
                var elem = document.getElementById("coin_percentage");
                if (temppercent.includes("-")) {
                    elem.style.color = "red";
                }
                else {
                    elem.style.color = "green";
                }
                $('#coin_name').text(tempcoin);
                $('#coin_value').text(tempvalue);
                $('#coin_value').removeClass("blink");
                $('#coin_percentage').text(temppercent);
            }
        })

        $.ajax({
            dataType: "json",
            url: "https://coincap.io/front",
            success: function (data) {
                for (obj in data) {
                    if (data[obj].short == cur_coin) {
                        cur_coin_long = data[obj].long;
                        showgraph(cur_coin, cur_coin_long);
                    }
                }
            }
        });
    }

    function showgraph(cur_coin, cur_coin_long) {
        $.ajax({
            dataType: "json",
            url: "https://coincap.io/front",
            success: function (data) {
                for (obj in data) {
                    if (data[obj].short == cur_coin) {
                        var vwap = data[obj].vwapData.toFixed(2);
                        $('#coin_value').text( numeral(data[obj].price).format('$0,0.00'));
                        $('#coin_change_1').text(numeral(data[obj].mktcap).format('$0,0.00'));
                        $('#coin_change_2').text(numeral(vwap).format('$0,0.00'));
                        $('#coin_change_3').text(numeral(data[obj].supply).format('$0,0.00'));
                        $('#coin_change_4').text(numeral(data[obj].usdVolume).format('$0,0.00'));
                    }
                }
            }
        });
        url = "https://coincap.io/history/365day/" + cur_coin;
        $.getJSON(url, function (data) {
            // Create the chart
            var chart = Highcharts.stockChart('graph_container', {
                chart: {
                    height: 400
                }, title: {
                    text: cur_coin_long + "-" + cur_coin,
                },
                scrollbar: {
                    barBackgroundColor: 'gray',
                    barBorderRadius: 7,
                    barBorderWidth: 0,
                    buttonBackgroundColor: 'red',
                    buttonBorderWidth: 0,
                    buttonArrowColor: 'yellow',
                    buttonBorderRadius: 7,
                    rifleColor: 'yellow',
                    trackBackgroundColor: 'white',
                    trackBorderWidth: 1,
                    trackBorderColor: 'silver',
                    trackBorderRadius: 7
                },
                rangeSelector: {
                    buttonTheme: { // styles for the buttons
                        fill: 'none',
                        stroke: 'none',
                        'stroke-width': 0,
                        r: 8,
                        style: {
                            color: '#1783ac;',
                            fontWeight: '600'
                        },
                        states: {
                            hover: {
                            },
                            select: {
                                fill: '#1b334b',
                                style: {
                                    color: '#1b334b;'
                                }
                            }
                        }
                    },
                    inputBoxBorderColor: '#1783ac',
                    inputBoxWidth: 120,
                    inputBoxHeight: 20,
                    inputStyle: {
                        color: '#1783ac',
                        fontWeight: 'bold',
                    },
                    labelStyle: {
                        color: '#fff',
                        fontWeight: 'bold'
                    },
                    selected: 1
                },
                series: [{
                    name: cur_coin + ' Price in USD',
                    data: data.price,
                    type: 'area',
                    threshold: null,
                    tooltip: {
                        valueDecimals: 2
                    }
                }],
                responsive: {
                    rules: [{
                        condition: {
                            maxWidth: 300
                        },
                        chartOptions: {
                            chart: {
                                height: 300
                            },
                            subtitle: {
                                text: null
                            },
                            navigator: {
                                enabled: false
                            }
                        }
                    }]
                }
            });
        });
    }
</script>
<!-- swiper -->
<script src="/static/js/swiper.js"></script>
<script>
    var swiper = new Swiper('.swiper-container', {
        slidesPerView: 5,
        slidesPerGroup: 5,
        autoplay: {
            delay: 8000,
            disableOnInteraction: false,
            stopOnLastSlide: false,
            loop: true,
        },
        loopFillGroupWithBlank: false,
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    });
</script>

<!-- endblock -->
{% endblock %}