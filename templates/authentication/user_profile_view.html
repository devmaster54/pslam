{% extends 'base.html' %} {% load static %} {% block carousel%}
<div class="container-fluid login-bg">
    <div class="row p-0 pt-5 p-md-5 bg-transparent-cover">

        <div class="col-12 col-md-4 ">
            <div class="col-12  d-flex justify-content-center  align-items-center profiledetail  bg-lightgreyblue">
                <div class="col-6 text-right">
                    <span class="">Home Address : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.address_line_1}} </span>
                </div>
            </div>

            <div class="col-12     d-flex justify-content-center align-items-center profiledetail ">
                <div class="col-6 text-right">
                    <span class="">Apartment/Suite : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.address_line_2}} </span>
                </div>
            </div>

            <div class="col-12     d-flex justify-content-center align-items-center profiledetail  bg-lightgreyblue">
                <div class="col-6 text-right">
                    <span class="">Locality Name : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.address_line_3}} </span>
                </div>
            </div>

           <!-- <div class="col-12     d-flex justify-content-center align-items-center profiledetail ">
                <div class="col-6 text-right">
                    <span class="">Landmark : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.landmark}} </span>
                </div>
            </div>-->

            <div class="col-12     d-flex justify-content-center align-items-center profiledetail ">
                <div class="col-6 text-right">
                    <span class="">City : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.city}} </span>
                </div>
            </div>

            <div class="col-12     d-flex justify-content-center align-items-center profiledetail  bg-lightgreyblue">
                <div class="col-6 text-right">
                    <span class="">State : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.state}} </span>
                </div>
            </div>

            <div class="col-12     d-flex justify-content-center align-items-center profiledetail  ">
                <div class="col-6 text-right">
                    <span class="">Country : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.country}} </span>
                </div>
            </div>

            <div class="col-12     d-flex justify-content-center align-items-center profiledetail bg-lightgreyblue">
                <div class="col-6 text-right">
                    <span class="">Zipcode : </span>
                </div>
                <div class="col-6 text-left">
                    <span class="  d-flex justify-content-center align-items-center profiledetail -font">{{userprofile.pincode}} </span>
                </div>
            </div>

            <div class="col-12 d-flex justify-content-around flex-wrap">
                <div class="p-2">
                    <a href="{% url 'auth:userprofileupdate' %}" class="btn btn-primary">
                        <i class="fa fa-edit"> </i> Edit Address</a>
                </div>
                <div class="p-2">
                    <a href="{% url 'auth:password_change' %}" class="btn btn-danger">
                        <i class="fa fa-edit"> </i> Change Password</a>
                </div>
            </div>

            <div class="col-12 d-md-none p-5">
                <div class="page-split-horizontal ">
                </div>
            </div>


        </div>



        <div class="d-none d-md-block col-md-2">
            <div class="page-split ">

            </div>
        </div>


        <div class="col-md-6">


            <div class="col-sm-12" id="div_security">
                <div class="col-12 row d-flex justify-content-around text-center">
                    <div class="col-12 text-left  d-flex justify-content-start  align-items-center">
                        <div class="security-level-1 d-flex justify-content-center align-items-center">
                            <i class="fa fa-lock fa-2x lock-level-1"></i>
                        </div>
                        <span>
                            <h3 class="offset-2">Level 1</h3>
                        </span>

                    </div>
                    <div class="col-12 pt-1 pb-3">
                        <div class="page-split-horizontal"></div>
                    </div>

                    <div class="col-3">
                        <a href="" class="panel-heading accordion-toggle collapsed left" data-toggle="collapse" data-parent="#accordion1,#accordion2,#accordion3"
                            data-target="#collapseOne">
                            <div id="bu1">
                                <img alt="" src="/static/images/badge/email.png" class="img-fluid imgtransform">
                                <div class="title">Verifed</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="" class="panel-heading accordion-toggle collapsed left" data-toggle="collapse" data-parent="#accordion1,#accordion2,#accordion3"
                            data-target="#collapseTwo">
                            <div id="bu2">
                                <img alt="" src="/static/images/badge/passphrase.png" class="img-fluid  {% if not mnemonic %}grayedout{% endif %}">
                                <div class="title">Verify</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="" class="panel-heading accordion-toggle collapsed left " data-toggle="collapse" data-parent="#accordion1,#accordion2,#accordion3"
                            data-target="#collapseThree">
                            <div id="bu3">
                                
                                <img alt="" src="/static/images/badge/key.png" class="img-fluid grayedout">
                                <div class="title">Verify</div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="panel-group" id="accordion1">
                    <div class="panel panel-default">
                        <div id="collapseOne" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div>
                                    <h3>Email</h3>
                                    <p>Success!. Your Email is Already Verified</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div id="collapseTwo" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <div>
                                    <h3>Recovery Passphrase</h3>
                                    <p>Write down your Recovery Phrase and keep it somewhere very safe and secure. Your Recovery
                                        Phrase allows you or anyone else with access to it, to restore your wallet and access
                                        your funds if you forget your password, or if our service is unavailable.</p>
                                    {% if mnemonic %}
                                        <h3>You have already generated a Recovery Phrase. Keep it safe!</h3>
                                        <p>If you lost it, contact customer support</p>
                                    {% else %}
                                        <a href="{% url 'auth:mnemonicgen' %}">Generate a passphrase</a>
                                        {% endif %}

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div id="collapseThree" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div>
                                    <h3>Create Password Hint</h3>
                                    <input type="text" placeholder="Create password Hint" class="password-hint-input">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- /**********************************************/ -->

                <div class="col-12 row d-flex justify-content-around text-center mt-5">
                    <div class="col-12 text-left  d-flex justify-content-start  align-items-center">
                        <div class="security-level-2 d-flex ">
                            <i class="fa fa-lock fa-2x lock-level-2 lock2-pos1"></i>
                            <i class="fa fa-lock fa-2x lock-level-2 lock2-pos2"></i>
                        </div>
                        <span>
                            <h3 class="offset-2">Level 2</h3>
                        </span>

                    </div>
                    <div class="col-12 pt-1 pb-3">
                        <div class="page-split-horizontal"></div>
                    </div>

                    <div class="col-3">
                        <a href="" class="panel-heading accordion-toggle collapsed left" data-toggle="collapse" data-parent="#level2accordion1,#level2accordion2,#level2accordion3"
                            data-target="#collapselevel2One">
                            <div id="bu1">
                                <img alt="" src="/static/images/badge/mobile.png" class="img-fluid imgtransform">
                                <div class="title">Verifed</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="" class="panel-heading accordion-toggle collapsed left" data-toggle="collapse" data-parent="#level2accordion1,#level2accordion2,#level2accordion3"
                            data-target="#collapselevel2Two">
                            <div id="bu2">
                                <img alt="" src="/static/images/badge/2step.png" class="img-fluid imgtransform">
                                <div class="title">Enable</div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="panel-group" id="level2accordion1">
                    <div class="panel panel-default">
                        <div id="collapselevel2One" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="col-12 text-center">
                                    <h3>Mobile</h3>
                                    {% if ph_no %}
                                    <p>Success!. Your Mobile number is already Verified</p>
                                    {% else %}
                                    <span>Please update your Mobile Number</span>
                                    {% endif %}

                                    <form method="post" id="phone_no_form" class="col-12 font-dark">
                                        {% csrf_token %}
                                        <input type="tel" size="30" value="{{ph_no}}" name="phone_number" id="id_phone_number" class="form-control login-input font-dark" placeholder="Mobile Number">

                                    </form>
                                    <button type="submit" onclick="phsubmit();" class="btn  btn-secondary exchange-next mt-2">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div id="collapselevel2Two" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <div>
                                    <h3>2 Step Verification</h3>
                                    <p>Enable or Disable Two Step Verification</p>

                                    <div class="col-12">
                                    </div>
                                    <form id="2fa">
                                        {% csrf_token %}
                                        <label class="switch">
                                            <input name="two_factor_status" id="id_two_factor_status" type="checkbox" 
                                            class="form-control signup-input" {% if 2stepvalue %} checked="checked" {% endif %} onclick='handleClick(this);'>

                                            <span class="slider round"></span>
                                        </label>


                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- modal -->
                    <div class="modal fade col-12 font-dark" id="success_modal" tabindex="-1" role="dialog" aria-labelledby="#{{ currency }}_modalTitle"
                        aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content text-center">
                                <div class="d-none d-md-block modal-header text-center">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    <h3 class="modal-title text-capitalize" id="modal_title">
                                        Confirm </h3>
                                </div>
                                <div class="col-12 d-md-none">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    <h5 class="modal-title text-capitalize" id="modal_title">
                                        Success</h5>

                                </div>
                                <div class="modal-body text-center">
                                    <span id="success_msg">
                                        <h3>Enter OTP</h3>
                                        <form id="otp_form">
                                            {% csrf_token %}
                                            <input name="otp" id="otp" type="tel" placeholder="One Time Password">
                                        </form>
                                        <button type="submit" onclick="otpsubmit();" class="btn  btn-secondary exchange-next mt-2">Submit</button>
                                        <button type="submit" onclick="resendotp();" class="btn  btn-empty  mt-2 font-dark" value="Resend OTP">Resend OTP</button>
                                      
                                    </span>
                                </div>
                                <div class="modal-footer">
                                    <div class="col-12 text-center">
                                        <button data-dismiss="modal" onclick="javascript:window.location.reload()" class="btn btn-default">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- modal -->





                    <!-- /*******************************************************/ -->
                </div>




            </div>



        </div>
    </div>
    {% endblock %} {% block script %}
    <script>
        function handleClick(cb) {
            $.ajax({
                type: 'POST',
                url: "{% url 'auth:toggle2factor' %}",
                data: $('#2fa').serialize(),
                success: function (result) {
                },
                error: function (result) {
                    alert('error. Your request cannot be fulfilled currently, please try again later. If problem persists, please contact support.');
                }
            });
        }
    </script>

    <script>
        $("#id_phone_number").change(function () {
            console.log($(this).val());
        });
    </script>

    <script>

        $("#id_phone_number").intlTelInput();
        function phsubmit() {
            value = $("#id_phone_number").val();
            if (!(value.indexOf('+')> -1)){
                $("#id_phone_number").intlTelInput("setNumber", "+" + $("#id_phone_number").intlTelInput("getSelectedCountryData").dialCode + value);
          
                 }
            $.ajax({
                type: 'POST',
                url: "{% url 'auth:phoneverify' %}",
                data: $('#phone_no_form').serialize(),
                dataType: 'json',
                success: function (result) {

                    $("#modal_title").text("Confirm Otp");
                    $("#success_modal").modal("show")
                },
                error: function (result) {


                }
            });

        }
    </script>


    <script>
        function otpsubmit() {
            $.ajax({
                type: 'POST',
                url: "{% url 'auth:phoneverify' %}",
                data: $('#otp_form').serialize(),
                dataType: 'json',
                success: function (result) {

                    $("#modal_title").text("Confirm Otp");
                    $("#success_msg").text("Phone Number updated");
                    $("#success_modal").modal("show")
                },
                error: function (result) {
                    $("#modal_title").text("Failed");
                    $("#success_msg").text("Phone Number update Failed");
                    $("#success_modal").modal("show")

                }
            });

        }
    </script> 
    <script>
        function resendotp(){
            $.ajax({
                type: 'GET',
                url: "{% url 'auth:resendotp' %}",
                dataType: 'json',
                data: {
                },
                success: function (result) {
                },
                error: function (result) {
                }
            });

        }
    </script>
    {% endblock %}